"use client";

import React, { useRef, useState } from "react";
import Image from "next/image";

import Tab from "react-bootstrap/Tab";
import Tabs from "react-bootstrap/Tabs";
import Link from "next/link";

import BookingTop from "../../../../../public/images/detail-imags-1.jpg";
import BookBtn from "../../../../../public/images/book-btn.png";
import { MyBooking, MyBookingState } from "@/store/features/accommodation/types/myBookingTypes";
import { useAppDispatch, useAppSelector } from "@/store/hooks";
import { useRouter } from "next/navigation";
import { formatDate } from "@/utils/formatData";
import UpComingTab from "./UpComingTab";
import ActiveTab from "./ActiveTab";
import getDateNGuest from '../../DateNGuest';
import { setMyBooking } from "@/store/features/accommodation/slices/myBookingSlice";


const CheckedOutTab = () => {
          const { checkedOut} = useAppSelector((state) => state.myBookings.data);
          const dispatch=useAppDispatch()
          const router=useRouter()
              const handleHotelNav = (item:MyBooking) => {
                     const {hotelId}=item
                     dispatch(setMyBooking(item))
                     router.push(`details/${hotelId}/booking`);
             
                   };
  return (
    <div className="row">
    {checkedOut?.length > 0 &&
      checkedOut.map((item) => {
        const {id, name, address, city, state, country, latitude, longitude } =
            item.hotel;
        return (
          <div key={item.id} className="col-md-12 mb-3 mb-2">
            <div className="mybooking-tab bg-white rounded-radius">
              <div className="book-again-box d-flex align-items-end justify-content-between flex-wrap gap-2">
                <div
                  className="book-again-left d-flex align-items-center gap-2"
                  // onClick={()=>handleHotelNav(item)}
                  // style={{cursor:"pointer"}}
                >
                  <div className="book-again-img-box">
                    <Image src={item?.primaryImage?.url} alt="hotel image" height={80} width={80}></Image>
                  </div>
                  <div className="book-again-text-box">
                    <h4>
                      {name} 
                    </h4>
                    <h5>
                    {getDateNGuest(item.startDate, item.endDate, item.adultsCount, item.childrenCount, item.specialCareCount)}

                      </h5>
                    <p>
                    {address} {city}, {state} 
                    </p>
                  </div>
                </div>
                <div className="book-again-right">
                  <Link
                    href={`/home/accommodation/details/${item.hotelId}`}
                    className="btn-book d-flex flex-wrap align-items-center gap-2"
                  >
                    <svg
                      width="15"
                      height="15"
                      viewBox="0 0 15 15"
                      fill="none"
                      xmlns="http://www.w3.org/2000/svg"
                    >
                      <path
                        d="M0.833008 7.50033C0.833008 4.98633 0.833008 3.72899 1.61434 2.94833C2.39567 2.16766 3.65234 2.16699 6.16634 2.16699H8.83301C11.347 2.16699 12.6043 2.16699 13.385 2.94833C14.1657 3.72966 14.1663 4.98633 14.1663 7.50033V8.83366C14.1663 11.3477 14.1663 12.605 13.385 13.3857C12.6037 14.1663 11.347 14.167 8.83301 14.167H6.16634C3.65234 14.167 2.39501 14.167 1.61434 13.3857C0.833674 12.6043 0.833008 11.3477 0.833008 8.83366V7.50033Z"
                        stroke="#652669"
                      />
                      <path
                        d="M4.16602 2.16699V1.16699M10.8327 2.16699V1.16699M1.16602 5.50033H13.8327"
                        stroke="#652669"
                        strokeLinecap="round"
                      />
                      <path
                        d="M11.5 10.8333C11.5 11.0101 11.4298 11.1797 11.3047 11.3047C11.1797 11.4298 11.0101 11.5 10.8333 11.5C10.6565 11.5 10.487 11.4298 10.3619 11.3047C10.2369 11.1797 10.1667 11.0101 10.1667 10.8333C10.1667 10.6565 10.2369 10.487 10.3619 10.3619C10.487 10.2369 10.6565 10.1667 10.8333 10.1667C11.0101 10.1667 11.1797 10.2369 11.3047 10.3619C11.4298 10.487 11.5 10.6565 11.5 10.8333ZM11.5 8.16667C11.5 8.34348 11.4298 8.51305 11.3047 8.63807C11.1797 8.7631 11.0101 8.83333 10.8333 8.83333C10.6565 8.83333 10.487 8.7631 10.3619 8.63807C10.2369 8.51305 10.1667 8.34348 10.1667 8.16667C10.1667 7.98986 10.2369 7.82029 10.3619 7.69526C10.487 7.57024 10.6565 7.5 10.8333 7.5C11.0101 7.5 11.1797 7.57024 11.3047 7.69526C11.4298 7.82029 11.5 7.98986 11.5 8.16667ZM8.16667 10.8333C8.16667 11.0101 8.09643 11.1797 7.9714 11.3047C7.84638 11.4298 7.67681 11.5 7.5 11.5C7.32319 11.5 7.15362 11.4298 7.0286 11.3047C6.90357 11.1797 6.83333 11.0101 6.83333 10.8333C6.83333 10.6565 6.90357 10.487 7.0286 10.3619C7.15362 10.2369 7.32319 10.1667 7.5 10.1667C7.67681 10.1667 7.84638 10.2369 7.9714 10.3619C8.09643 10.487 8.16667 10.6565 8.16667 10.8333ZM8.16667 8.16667C8.16667 8.34348 8.09643 8.51305 7.9714 8.63807C7.84638 8.7631 7.67681 8.83333 7.5 8.83333C7.32319 8.83333 7.15362 8.7631 7.0286 8.63807C6.90357 8.51305 6.83333 8.34348 6.83333 8.16667C6.83333 7.98986 6.90357 7.82029 7.0286 7.69526C7.15362 7.57024 7.32319 7.5 7.5 7.5C7.67681 7.5 7.84638 7.57024 7.9714 7.69526C8.09643 7.82029 8.16667 7.98986 8.16667 8.16667ZM4.83333 10.8333C4.83333 11.0101 4.7631 11.1797 4.63807 11.3047C4.51305 11.4298 4.34348 11.5 4.16667 11.5C3.98986 11.5 3.82029 11.4298 3.69526 11.3047C3.57024 11.1797 3.5 11.0101 3.5 10.8333C3.5 10.6565 3.57024 10.487 3.69526 10.3619C3.82029 10.2369 3.98986 10.1667 4.16667 10.1667C4.34348 10.1667 4.51305 10.2369 4.63807 10.3619C4.7631 10.487 4.83333 10.6565 4.83333 10.8333ZM4.83333 8.16667C4.83333 8.34348 4.7631 8.51305 4.63807 8.63807C4.51305 8.7631 4.34348 8.83333 4.16667 8.83333C3.98986 8.83333 3.82029 8.7631 3.69526 8.63807C3.57024 8.51305 3.5 8.34348 3.5 8.16667C3.5 7.98986 3.57024 7.82029 3.69526 7.69526C3.82029 7.57024 3.98986 7.5 4.16667 7.5C4.34348 7.5 4.51305 7.57024 4.63807 7.69526C4.7631 7.82029 4.83333 7.98986 4.83333 8.16667Z"
                        fill="#652669"
                      />
                    </svg>
                    <span>Book again</span>
                  </Link>
                </div>
              </div>
            </div>
          </div>
        );
      })}
    
    {/* <div className='col-md-12 mb-3 mb-2'>
                <div className='mybooking-tab bg-white rounded-radius'>
                    <div className='book-again-box d-flex align-items-end justify-content-between flex-wrap gap-2'>
                        <div className='book-again-left d-flex align-items-center gap-2'>
                            <div className='book-again-img-box'>
                                <Image alt='' src={BookBtn}></Image>
                            </div>
                            <div className='book-again-text-box'>
                                <h4>Accra Marriott Hotel, Ghana</h4>
                                <h5>7 July - 8 July 2024  •  1 Guest</h5>
                                <p>640 m drive to Accra Airport (ACC-Kotoka Intl.)</p>
                            </div>
                        </div>
                        <div className='book-again-right'>
                            <Link href="" className='btn-book d-flex flex-wrap align-items-center gap-2'>
                                <svg width="15" height="15" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M0.833008 7.50033C0.833008 4.98633 0.833008 3.72899 1.61434 2.94833C2.39567 2.16766 3.65234 2.16699 6.16634 2.16699H8.83301C11.347 2.16699 12.6043 2.16699 13.385 2.94833C14.1657 3.72966 14.1663 4.98633 14.1663 7.50033V8.83366C14.1663 11.3477 14.1663 12.605 13.385 13.3857C12.6037 14.1663 11.347 14.167 8.83301 14.167H6.16634C3.65234 14.167 2.39501 14.167 1.61434 13.3857C0.833674 12.6043 0.833008 11.3477 0.833008 8.83366V7.50033Z" stroke="#652669"/><path d="M4.16602 2.16699V1.16699M10.8327 2.16699V1.16699M1.16602 5.50033H13.8327" stroke="#652669" strokeLinecap="round"/><path d="M11.5 10.8333C11.5 11.0101 11.4298 11.1797 11.3047 11.3047C11.1797 11.4298 11.0101 11.5 10.8333 11.5C10.6565 11.5 10.487 11.4298 10.3619 11.3047C10.2369 11.1797 10.1667 11.0101 10.1667 10.8333C10.1667 10.6565 10.2369 10.487 10.3619 10.3619C10.487 10.2369 10.6565 10.1667 10.8333 10.1667C11.0101 10.1667 11.1797 10.2369 11.3047 10.3619C11.4298 10.487 11.5 10.6565 11.5 10.8333ZM11.5 8.16667C11.5 8.34348 11.4298 8.51305 11.3047 8.63807C11.1797 8.7631 11.0101 8.83333 10.8333 8.83333C10.6565 8.83333 10.487 8.7631 10.3619 8.63807C10.2369 8.51305 10.1667 8.34348 10.1667 8.16667C10.1667 7.98986 10.2369 7.82029 10.3619 7.69526C10.487 7.57024 10.6565 7.5 10.8333 7.5C11.0101 7.5 11.1797 7.57024 11.3047 7.69526C11.4298 7.82029 11.5 7.98986 11.5 8.16667ZM8.16667 10.8333C8.16667 11.0101 8.09643 11.1797 7.9714 11.3047C7.84638 11.4298 7.67681 11.5 7.5 11.5C7.32319 11.5 7.15362 11.4298 7.0286 11.3047C6.90357 11.1797 6.83333 11.0101 6.83333 10.8333C6.83333 10.6565 6.90357 10.487 7.0286 10.3619C7.15362 10.2369 7.32319 10.1667 7.5 10.1667C7.67681 10.1667 7.84638 10.2369 7.9714 10.3619C8.09643 10.487 8.16667 10.6565 8.16667 10.8333ZM8.16667 8.16667C8.16667 8.34348 8.09643 8.51305 7.9714 8.63807C7.84638 8.7631 7.67681 8.83333 7.5 8.83333C7.32319 8.83333 7.15362 8.7631 7.0286 8.63807C6.90357 8.51305 6.83333 8.34348 6.83333 8.16667C6.83333 7.98986 6.90357 7.82029 7.0286 7.69526C7.15362 7.57024 7.32319 7.5 7.5 7.5C7.67681 7.5 7.84638 7.57024 7.9714 7.69526C8.09643 7.82029 8.16667 7.98986 8.16667 8.16667ZM4.83333 10.8333C4.83333 11.0101 4.7631 11.1797 4.63807 11.3047C4.51305 11.4298 4.34348 11.5 4.16667 11.5C3.98986 11.5 3.82029 11.4298 3.69526 11.3047C3.57024 11.1797 3.5 11.0101 3.5 10.8333C3.5 10.6565 3.57024 10.487 3.69526 10.3619C3.82029 10.2369 3.98986 10.1667 4.16667 10.1667C4.34348 10.1667 4.51305 10.2369 4.63807 10.3619C4.7631 10.487 4.83333 10.6565 4.83333 10.8333ZM4.83333 8.16667C4.83333 8.34348 4.7631 8.51305 4.63807 8.63807C4.51305 8.7631 4.34348 8.83333 4.16667 8.83333C3.98986 8.83333 3.82029 8.7631 3.69526 8.63807C3.57024 8.51305 3.5 8.34348 3.5 8.16667C3.5 7.98986 3.57024 7.82029 3.69526 7.69526C3.82029 7.57024 3.98986 7.5 4.16667 7.5C4.34348 7.5 4.51305 7.57024 4.63807 7.69526C4.7631 7.82029 4.83333 7.98986 4.83333 8.16667Z" fill="#652669"/></svg>
                                <span>Book again</span>
                            </Link>
                        </div>
                    </div>
                </div>
            </div>
            <div className='col-md-12 mb-3 mb-2'>
                <div className='mybooking-tab bg-white rounded-radius'>
                    <div className='book-again-box d-flex align-items-end justify-content-between flex-wrap gap-2'>
                        <div className='book-again-left d-flex align-items-center gap-2'>
                            <div className='book-again-img-box'>
                                <Image alt='' src={BookBtn}></Image>
                            </div>
                            <div className='book-again-text-box'>
                                <h4>Accra Marriott Hotel, Ghana</h4>
                                <h5>7 July - 8 July 2024  •  1 Guest</h5>
                                <p>640 m drive to Accra Airport (ACC-Kotoka Intl.)</p>
                            </div>
                        </div>
                        <div className='book-again-right'>
                            <Link href="" className='btn-book d-flex flex-wrap align-items-center gap-2'>
                                <svg width="15" height="15" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M0.833008 7.50033C0.833008 4.98633 0.833008 3.72899 1.61434 2.94833C2.39567 2.16766 3.65234 2.16699 6.16634 2.16699H8.83301C11.347 2.16699 12.6043 2.16699 13.385 2.94833C14.1657 3.72966 14.1663 4.98633 14.1663 7.50033V8.83366C14.1663 11.3477 14.1663 12.605 13.385 13.3857C12.6037 14.1663 11.347 14.167 8.83301 14.167H6.16634C3.65234 14.167 2.39501 14.167 1.61434 13.3857C0.833674 12.6043 0.833008 11.3477 0.833008 8.83366V7.50033Z" stroke="#652669"/><path d="M4.16602 2.16699V1.16699M10.8327 2.16699V1.16699M1.16602 5.50033H13.8327" stroke="#652669" strokeLinecap="round"/><path d="M11.5 10.8333C11.5 11.0101 11.4298 11.1797 11.3047 11.3047C11.1797 11.4298 11.0101 11.5 10.8333 11.5C10.6565 11.5 10.487 11.4298 10.3619 11.3047C10.2369 11.1797 10.1667 11.0101 10.1667 10.8333C10.1667 10.6565 10.2369 10.487 10.3619 10.3619C10.487 10.2369 10.6565 10.1667 10.8333 10.1667C11.0101 10.1667 11.1797 10.2369 11.3047 10.3619C11.4298 10.487 11.5 10.6565 11.5 10.8333ZM11.5 8.16667C11.5 8.34348 11.4298 8.51305 11.3047 8.63807C11.1797 8.7631 11.0101 8.83333 10.8333 8.83333C10.6565 8.83333 10.487 8.7631 10.3619 8.63807C10.2369 8.51305 10.1667 8.34348 10.1667 8.16667C10.1667 7.98986 10.2369 7.82029 10.3619 7.69526C10.487 7.57024 10.6565 7.5 10.8333 7.5C11.0101 7.5 11.1797 7.57024 11.3047 7.69526C11.4298 7.82029 11.5 7.98986 11.5 8.16667ZM8.16667 10.8333C8.16667 11.0101 8.09643 11.1797 7.9714 11.3047C7.84638 11.4298 7.67681 11.5 7.5 11.5C7.32319 11.5 7.15362 11.4298 7.0286 11.3047C6.90357 11.1797 6.83333 11.0101 6.83333 10.8333C6.83333 10.6565 6.90357 10.487 7.0286 10.3619C7.15362 10.2369 7.32319 10.1667 7.5 10.1667C7.67681 10.1667 7.84638 10.2369 7.9714 10.3619C8.09643 10.487 8.16667 10.6565 8.16667 10.8333ZM8.16667 8.16667C8.16667 8.34348 8.09643 8.51305 7.9714 8.63807C7.84638 8.7631 7.67681 8.83333 7.5 8.83333C7.32319 8.83333 7.15362 8.7631 7.0286 8.63807C6.90357 8.51305 6.83333 8.34348 6.83333 8.16667C6.83333 7.98986 6.90357 7.82029 7.0286 7.69526C7.15362 7.57024 7.32319 7.5 7.5 7.5C7.67681 7.5 7.84638 7.57024 7.9714 7.69526C8.09643 7.82029 8.16667 7.98986 8.16667 8.16667ZM4.83333 10.8333C4.83333 11.0101 4.7631 11.1797 4.63807 11.3047C4.51305 11.4298 4.34348 11.5 4.16667 11.5C3.98986 11.5 3.82029 11.4298 3.69526 11.3047C3.57024 11.1797 3.5 11.0101 3.5 10.8333C3.5 10.6565 3.57024 10.487 3.69526 10.3619C3.82029 10.2369 3.98986 10.1667 4.16667 10.1667C4.34348 10.1667 4.51305 10.2369 4.63807 10.3619C4.7631 10.487 4.83333 10.6565 4.83333 10.8333ZM4.83333 8.16667C4.83333 8.34348 4.7631 8.51305 4.63807 8.63807C4.51305 8.7631 4.34348 8.83333 4.16667 8.83333C3.98986 8.83333 3.82029 8.7631 3.69526 8.63807C3.57024 8.51305 3.5 8.34348 3.5 8.16667C3.5 7.98986 3.57024 7.82029 3.69526 7.69526C3.82029 7.57024 3.98986 7.5 4.16667 7.5C4.34348 7.5 4.51305 7.57024 4.63807 7.69526C4.7631 7.82029 4.83333 7.98986 4.83333 8.16667Z" fill="#652669"/></svg>
                                <span>Book again</span>
                            </Link>
                        </div>
                    </div>
                </div>
            </div> */}
  </div>
  )
}

export default CheckedOutTab